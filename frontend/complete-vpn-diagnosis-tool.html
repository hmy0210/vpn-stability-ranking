<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VPNã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨ºæ–­ - DNSæ¼ã‚Œãƒ»WebRTCãƒªãƒ¼ã‚¯ãƒ»IPv6æ¼ã‚Œã‚’ç„¡æ–™ãƒã‚§ãƒƒã‚¯</title>
    <meta name="description" content="VPNã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç„¡æ–™ã§è¨ºæ–­ã€‚DNSæ¼ã‚Œã€WebRTCãƒªãƒ¼ã‚¯ã€IPv6æ¼ã‚Œã‚’è‡ªå‹•æ¤œå‡ºã€‚ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Œå…¨å‹•ä½œã€ãƒ‡ãƒ¼ã‚¿ã¯å¤–éƒ¨é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚">
    
    <!-- ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã§å‹•ä½œã—ã¾ã™ -->
    <!-- ã‚µãƒ¼ãƒãƒ¼ä¸è¦ï¼šãƒ–ãƒ©ã‚¦ã‚¶ã§ç›´æ¥é–‹ã‘ã¾ã™ -->
    <!-- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼é‡è¦–ï¼šå…¨ã¦ã®å‡¦ç†ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å®Œçµ -->
    
    <style>
        /* è¨ºæ–­ãƒ„ãƒ¼ãƒ«å°‚ç”¨ã®ã‚¹ã‚³ãƒ¼ãƒ— - ã‚µã‚¤ãƒˆå…¨ä½“ã«ã¯å½±éŸ¿ã—ãªã„ */
        #vpn-diagnosis-tool-wrapper {
            all: initial;
            display: block;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            margin: 0;
            box-sizing: border-box;
        }

        #vpn-diagnosis-tool-wrapper * {
            box-sizing: border-box;
        }

        #vpn-diagnosis-tool-wrapper .container {
            max-width: 800px;
            margin: 0 auto;
        }

        #vpn-diagnosis-tool-wrapper .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        #vpn-diagnosis-tool-wrapper .header h1 {
            font-size: 2em;
            margin: 0 0 10px 0;
            padding: 0;
            font-weight: 700;
            border: none;
            background: none;
            color: white;
            line-height: 1.2;
        }

        #vpn-diagnosis-tool-wrapper .header p {
            font-size: 1.1em;
            opacity: 0.9;
            margin: 0;
            padding: 0;
            color: white;
        }

        #vpn-diagnosis-tool-wrapper .tool-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            padding: 40px;
            margin-bottom: 20px;
        }

        #vpn-diagnosis-tool-wrapper .connection-info {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        #vpn-diagnosis-tool-wrapper .connection-info h3 {
            font-size: 1.2em;
            font-weight: 700;
            color: #2c3e50;
            margin: 0 0 15px 0;
            padding: 0;
            text-align: center;
            border: none;
            background: none;
            line-height: 1.4;
        }

        #vpn-diagnosis-tool-wrapper .current-connection {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e5e7eb;
        }

        #vpn-diagnosis-tool-wrapper .ip-display {
            text-align: center;
            margin-bottom: 15px;
        }

        #vpn-diagnosis-tool-wrapper .ip-label {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        #vpn-diagnosis-tool-wrapper .ip-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #2c3e50;
            font-family: monospace;
            margin-bottom: 10px;
        }

        #vpn-diagnosis-tool-wrapper .location-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1.1em;
            color: #4b5563;
            margin-bottom: 10px;
        }

        #vpn-diagnosis-tool-wrapper .org-display {
            text-align: center;
            font-size: 0.9em;
            color: #7f8c8d;
            margin-top: 8px;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        #vpn-diagnosis-tool-wrapper .comparison-section {
            margin-top: 20px;
        }

        #vpn-diagnosis-tool-wrapper .comparison-section h4 {
            font-size: 1.1em;
            font-weight: 700;
            color: #2c3e50;
            margin: 0 0 10px 0;
            padding: 0;
            text-align: center;
            border: none;
            background: none;
            line-height: 1.4;
        }

        #vpn-diagnosis-tool-wrapper .comparison-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e5e7eb;
        }

        #vpn-diagnosis-tool-wrapper .comparison-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        #vpn-diagnosis-tool-wrapper .comparison-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        #vpn-diagnosis-tool-wrapper .comparison-label {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        #vpn-diagnosis-tool-wrapper .comparison-value {
            font-size: 1.1em;
            font-weight: 600;
            color: #2c3e50;
            font-family: monospace;
        }

        #vpn-diagnosis-tool-wrapper .comparison-arrow {
            text-align: center;
            font-size: 1.5em;
            margin: 10px 0;
            color: #667eea;
        }

        #vpn-diagnosis-tool-wrapper .comparison-status {
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.9em;
            font-weight: 600;
            margin-top: 15px;
        }

        #vpn-diagnosis-tool-wrapper .comparison-status.changed {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
        }

        #vpn-diagnosis-tool-wrapper .comparison-status.same {
            background: #f8f9fa;
            color: #6c757d;
        }

        #vpn-diagnosis-tool-wrapper .comparison-time {
            font-size: 0.8em;
            color: #7f8c8d;
            text-align: center;
            margin-top: 5px;
        }

        #vpn-diagnosis-tool-wrapper .status-section {
            text-align: center;
            margin-bottom: 30px;
        }

        #vpn-diagnosis-tool-wrapper .status-indicator {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            background: #f0f0f0;
            transition: all 0.3s ease;
        }

        #vpn-diagnosis-tool-wrapper .status-indicator.checking {
            background: linear-gradient(135deg, #667eea, #764ba2);
            animation: vpn-pulse 1.5s infinite;
        }

        #vpn-diagnosis-tool-wrapper .status-indicator.safe {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        #vpn-diagnosis-tool-wrapper .status-indicator.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        #vpn-diagnosis-tool-wrapper .status-indicator.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        @keyframes vpn-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        #vpn-diagnosis-tool-wrapper .status-text {
            font-size: 1.5em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        #vpn-diagnosis-tool-wrapper .status-description {
            color: #7f8c8d;
            font-size: 0.95em;
        }

        #vpn-diagnosis-tool-wrapper .start-button {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            display: block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        #vpn-diagnosis-tool-wrapper .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        #vpn-diagnosis-tool-wrapper .start-button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        #vpn-diagnosis-tool-wrapper .progress-section {
            display: none;
            margin-top: 30px;
        }

        #vpn-diagnosis-tool-wrapper .progress-item {
            background: #f8f9fa;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        #vpn-diagnosis-tool-wrapper .progress-item.checking {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
        }

        #vpn-diagnosis-tool-wrapper .progress-item.success {
            background: #d4edda;
            border-left: 4px solid #10b981;
        }

        #vpn-diagnosis-tool-wrapper .progress-item.warning {
            background: #fff3cd;
            border-left: 4px solid #f59e0b;
        }

        #vpn-diagnosis-tool-wrapper .progress-label {
            font-weight: 600;
            color: #2c3e50;
        }

        #vpn-diagnosis-tool-wrapper .progress-status {
            font-size: 1.5em;
        }

        #vpn-diagnosis-tool-wrapper .results-section {
            display: none;
            margin-top: 30px;
        }

        #vpn-diagnosis-tool-wrapper .score-summary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
        }

        #vpn-diagnosis-tool-wrapper .score-value {
            font-size: 4em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        #vpn-diagnosis-tool-wrapper .score-label {
            font-size: 1.2em;
            opacity: 0.9;
        }

        #vpn-diagnosis-tool-wrapper .result-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        #vpn-diagnosis-tool-wrapper .result-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        #vpn-diagnosis-tool-wrapper .result-card.safe {
            border-color: #10b981;
            background: linear-gradient(135deg, #d4edda 0%, #ffffff 100%);
        }

        #vpn-diagnosis-tool-wrapper .result-card.warning {
            border-color: #f59e0b;
            background: linear-gradient(135deg, #fff3cd 0%, #ffffff 100%);
        }

        #vpn-diagnosis-tool-wrapper .result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        #vpn-diagnosis-tool-wrapper .result-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2em;
            font-weight: 700;
            color: #2c3e50;
        }

        #vpn-diagnosis-tool-wrapper .result-icon {
            font-size: 1.5em;
        }

        #vpn-diagnosis-tool-wrapper .result-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        #vpn-diagnosis-tool-wrapper .badge-safe {
            background: #10b981;
            color: white;
        }

        #vpn-diagnosis-tool-wrapper .badge-warning {
            background: #f59e0b;
            color: white;
        }

        #vpn-diagnosis-tool-wrapper .result-details {
            color: #4b5563;
            line-height: 1.6;
            margin-top: 10px;
        }

        #vpn-diagnosis-tool-wrapper .result-data {
            background: #f3f4f6;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 0.9em;
            word-break: break-all;
        }

        #vpn-diagnosis-tool-wrapper .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        #vpn-diagnosis-tool-wrapper .action-button {
            flex: 1;
            min-width: 200px;
            padding: 15px 30px;
            border-radius: 10px;
            border: none;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        #vpn-diagnosis-tool-wrapper .button-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }

        #vpn-diagnosis-tool-wrapper .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(102, 126, 234, 0.4);
        }

        #vpn-diagnosis-tool-wrapper .button-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        #vpn-diagnosis-tool-wrapper .button-secondary:hover {
            background: #f0f4ff;
        }

        #vpn-diagnosis-tool-wrapper .info-note {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 15px 20px;
            border-radius: 8px;
            margin-top: 30px;
            color: #4b5563;
            line-height: 1.6;
        }

        #vpn-diagnosis-tool-wrapper .info-note strong {
            color: #2c3e50;
        }

        #vpn-diagnosis-tool-wrapper .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: vpn-spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes vpn-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* SNSã‚·ã‚§ã‚¢ãƒ¢ãƒ¼ãƒ€ãƒ« */
        #vpn-diagnosis-tool-wrapper .share-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        #vpn-diagnosis-tool-wrapper .share-modal.active {
            display: flex;
        }

        #vpn-diagnosis-tool-wrapper .share-modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        #vpn-diagnosis-tool-wrapper .share-modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        #vpn-diagnosis-tool-wrapper .share-modal-header h3 {
            font-size: 1.4em;
            font-weight: 700;
            color: #2c3e50;
            margin: 0 0 10px 0;
            padding: 0;
            border: none;
            background: none;
        }

        #vpn-diagnosis-tool-wrapper .share-modal-header p {
            font-size: 0.9em;
            color: #7f8c8d;
            margin: 0;
            padding: 0;
        }

        #vpn-diagnosis-tool-wrapper .share-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        #vpn-diagnosis-tool-wrapper .share-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px 15px;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        #vpn-diagnosis-tool-wrapper .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        #vpn-diagnosis-tool-wrapper .share-btn.twitter {
            border-color: #000000;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.twitter:hover {
            background: #f0f0f0;
            border-color: #000000;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.twitter svg {
            color: #000000;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.line {
            border-color: #06C755;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.line:hover {
            background: #E8F9EE;
            border-color: #06C755;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.line svg {
            color: #06C755;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.facebook {
            border-color: #1877F2;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.facebook:hover {
            background: #E7F3FF;
            border-color: #1877F2;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.facebook svg {
            color: #1877F2;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.copy {
            border-color: #667eea;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.copy:hover {
            background: #f0f4ff;
            border-color: #667eea;
        }

        #vpn-diagnosis-tool-wrapper .share-btn.copy svg {
            color: #667eea;
        }

        #vpn-diagnosis-tool-wrapper .share-btn-icon {
            font-size: 2.5em;
            margin-bottom: 8px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #vpn-diagnosis-tool-wrapper .share-btn-icon svg {
            width: 36px;
            height: 36px;
        }

        #vpn-diagnosis-tool-wrapper .share-btn-label {
            font-size: 0.9em;
            font-weight: 600;
            color: #2c3e50;
        }

        #vpn-diagnosis-tool-wrapper .share-close-btn {
            width: 100%;
            padding: 12px;
            background: #f8f9fa;
            border: none;
            border-radius: 8px;
            font-size: 0.95em;
            font-weight: 600;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #vpn-diagnosis-tool-wrapper .share-close-btn:hover {
            background: #e9ecef;
        }

        #vpn-diagnosis-tool-wrapper .copy-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #10b981;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            z-index: 10001;
            display: none;
        }

        #vpn-diagnosis-tool-wrapper .copy-notification.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @media (max-width: 600px) {
            #vpn-diagnosis-tool-wrapper .header h1 {
                font-size: 1.5em;
            }

            #vpn-diagnosis-tool-wrapper .header p {
                font-size: 0.95em;
            }

            #vpn-diagnosis-tool-wrapper .tool-card {
                padding: 25px 20px;
            }

            #vpn-diagnosis-tool-wrapper .status-indicator {
                width: 100px;
                height: 100px;
                font-size: 2.5em;
            }

            #vpn-diagnosis-tool-wrapper .status-text {
                font-size: 1.2em;
            }

            #vpn-diagnosis-tool-wrapper .start-button {
                font-size: 1em;
                padding: 15px 30px;
            }

            #vpn-diagnosis-tool-wrapper .score-value {
                font-size: 3em;
            }

            #vpn-diagnosis-tool-wrapper .action-buttons {
                flex-direction: column;
            }

            #vpn-diagnosis-tool-wrapper .action-button {
                min-width: 100%;
            }

            #vpn-diagnosis-tool-wrapper .ip-value {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div id="vpn-diagnosis-tool-wrapper">
        <div class="container">
            <div class="header">
                <h1>ğŸ”’ VPNã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨ºæ–­</h1>
                <p>DNSæ¼ã‚Œãƒ»WebRTCãƒªãƒ¼ã‚¯ãƒ»IPv6æ¼ã‚Œã‚’<br>ç„¡æ–™ã§è‡ªå‹•æ¤œæŸ»</p>
            </div>

            <div class="tool-card">
                <div class="connection-info">
                    <h3>ğŸ“ ç¾åœ¨ã®æ¥ç¶šæƒ…å ±</h3>
                    <div class="current-connection" id="currentConnection">
                        <div style="text-align: center; color: #7f8c8d; padding: 20px;">
                            <span class="spinner"></span>æ¥ç¶šæƒ…å ±ã‚’å–å¾—ä¸­...
                        </div>
                    </div>
                    <div class="comparison-section" id="comparisonSection" style="display: none;">
                        <h4>ğŸ“Š å‰å›ã¨ã®æ¯”è¼ƒ</h4>
                        <div id="comparisonContent"></div>
                    </div>
                </div>

                <div class="status-section">
                    <div class="status-indicator" id="statusIndicator">ğŸ”</div>
                    <div class="status-text" id="statusText">è¨ºæ–­æº–å‚™å®Œäº†</div>
                    <div class="status-description" id="statusDescription">
                        ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨ºæ–­ã‚’é–‹å§‹
                    </div>
                </div>

                <button class="start-button" id="startButton">ğŸš€ è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹</button>

                <div class="progress-section" id="progressSection">
                    <div class="progress-item" id="progressDNS">
                        <div class="progress-label"><span>DNSæ¼ã‚Œãƒã‚§ãƒƒã‚¯</span></div>
                        <div class="progress-status">â³</div>
                    </div>
                    <div class="progress-item" id="progressWebRTC">
                        <div class="progress-label"><span>WebRTCãƒªãƒ¼ã‚¯ãƒã‚§ãƒƒã‚¯</span></div>
                        <div class="progress-status">â³</div>
                    </div>
                    <div class="progress-item" id="progressIPv6">
                        <div class="progress-label"><span>IPv6æ¼ã‚Œãƒã‚§ãƒƒã‚¯</span></div>
                        <div class="progress-status">â³</div>
                    </div>
                </div>

                <div class="results-section" id="resultsSection">
                    <div class="score-summary">
                        <div class="score-value" id="scoreValue">--</div>
                        <div class="score-label" id="scoreLabel">ç·åˆã‚¹ã‚³ã‚¢</div>
                    </div>
                    <div id="resultCards"></div>
                    <div class="action-buttons">
                        <button class="action-button button-primary" id="shareButton">ğŸ“¤ çµæœã‚’ã‚·ã‚§ã‚¢</button>
                        <button class="action-button button-secondary" id="restartButton">ğŸ”„ å†è¨ºæ–­ã™ã‚‹</button>
                    </div>
                </div>

                <div class="info-note">
                    <strong>ğŸ“Œ è¨ºæ–­ã«ã¤ã„ã¦</strong><br>
                    ã“ã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã¯ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Œå…¨ã«å‹•ä½œã—ã¾ã™ã€‚è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ã¯å¤–éƒ¨ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚ä¸Šè¨˜ã®æ¥ç¶šæƒ…å ±ã‚’ç¢ºèªã—ã¦ã€VPNæ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºã‹ã‚ã¦ã‹ã‚‰è¨ºæ–­ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
                </div>
            </div>
        </div>

        <!-- SNSã‚·ã‚§ã‚¢ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div class="share-modal" id="shareModal">
            <div class="share-modal-content">
                <div class="share-modal-header">
                    <h3>ğŸ“¤ çµæœã‚’ã‚·ã‚§ã‚¢</h3>
                    <p>è¨ºæ–­çµæœã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†</p>
                </div>
                <div class="share-buttons">
                    <a href="#" class="share-btn twitter" id="shareTwitter">
                        <div class="share-btn-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </div>
                        <div class="share-btn-label">Twitter</div>
                    </a>
                    <a href="#" class="share-btn line" id="shareLine">
                        <div class="share-btn-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
                            </svg>
                        </div>
                        <div class="share-btn-label">LINE</div>
                    </a>
                    <a href="#" class="share-btn facebook" id="shareFacebook">
                        <div class="share-btn-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </div>
                        <div class="share-btn-label">Facebook</div>
                    </a>
                    <button class="share-btn copy" id="shareCopy">
                        <div class="share-btn-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                            </svg>
                        </div>
                        <div class="share-btn-label">ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼</div>
                    </button>
                </div>
                <button class="share-close-btn" id="shareClose">é–‰ã˜ã‚‹</button>
            </div>
        </div>

        <!-- ã‚³ãƒ”ãƒ¼é€šçŸ¥ -->
        <div class="copy-notification" id="copyNotification">
            âœ… ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼
        </div>
    </div>

    <script>
        (function() {
            let diagnosisResults = { dns: null, webrtc: null, ipv6: null };
            let currentConnectionData = null;

            async function loadConnectionInfo() {
                try {
                    const ipResponse = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipResponse.json();
                    const ip = ipData.ip;

                    let locationData = null;
                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 3000);
                        const response = await fetch(`https://ipapi.co/${ip}/json/`, { signal: controller.signal });
                        clearTimeout(timeoutId);
                        if (response.ok) locationData = await response.json();
                    } catch (e) { console.log('ä½ç½®æƒ…å ±å–å¾—ã‚¹ã‚­ãƒƒãƒ—'); }

                    currentConnectionData = {
                        ip: ip,
                        country: locationData?.country_code || null,
                        countryName: locationData?.country_name || null,
                        city: locationData?.city || null,
                        org: locationData?.org || null,
                        timestamp: new Date().toISOString()
                    };

                    displayCurrentConnection(currentConnectionData);
                    displayComparison(currentConnectionData);
                } catch (error) {
                    console.error('IPå–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                    document.getElementById('currentConnection').innerHTML = '<div style="text-align: center; padding: 20px;"><div style="color: #f59e0b; margin-bottom: 10px;">âš ï¸ IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ</div><div style="color: #6c757d; font-size: 0.9em;">è¨ºæ–­ã¯å®Ÿè¡Œã§ãã¾ã™</div></div>';
                }
            }

            function displayCurrentConnection(data) {
                let locationHtml = '';
                if (data.countryName && data.city) {
                    const flag = getCountryFlag(data.country);
                    locationHtml = `<div class="location-display"><span style="font-size: 1.5em;">${flag}</span><span>${data.countryName} Â· ${data.city}</span></div>`;
                }
                
                let orgHtml = '';
                if (data.org) {
                    orgHtml = `<div class="org-display">ğŸ¢ ${data.org}</div>`;
                }
                
                const html = `<div class="ip-display"><div class="ip-label">IPã‚¢ãƒ‰ãƒ¬ã‚¹</div><div class="ip-value">${data.ip}</div></div>${locationHtml}${orgHtml}`;
                document.getElementById('currentConnection').innerHTML = html;
            }

            function displayComparison(currentData) {
                const lastDataStr = localStorage.getItem('vpn_last_connection');
                if (!lastDataStr) {
                    document.getElementById('comparisonSection').style.display = 'block';
                    document.getElementById('comparisonContent').innerHTML = '<div style="text-align: center; padding: 15px; color: #7f8c8d; font-size: 0.9em;">â„¹ï¸ è¨ºæ–­å¾Œã«æ¥ç¶šæƒ…å ±ã‚’è¨˜éŒ²ã—ã¾ã™</div>';
                    return;
                }
                const lastData = JSON.parse(lastDataStr);
                const timeAgo = getTimeAgo(lastData.timestamp);
                let html;
                if (lastData.ip === currentData.ip) {
                    html = `<div class="comparison-card"><div class="comparison-status same">â„¹ï¸ å‰å›è¨ªå•æ™‚ã¨åŒã˜IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™</div><div class="comparison-time">${timeAgo}</div></div>`;
                } else {
                    html = `<div class="comparison-card"><div class="comparison-item"><div class="comparison-label">å‰å›</div><div class="comparison-value">${lastData.ip}</div><div class="comparison-time">${timeAgo}</div></div><div class="comparison-arrow">â¬‡ï¸</div><div class="comparison-item"><div class="comparison-label">ä»Šå›</div><div class="comparison-value">${currentData.ip}</div></div><div class="comparison-status changed">âœ… IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ</div></div>`;
                }
                document.getElementById('comparisonContent').innerHTML = html;
                document.getElementById('comparisonSection').style.display = 'block';
            }

            function getCountryFlag(code) {
                if (!code) return 'ğŸŒ';
                const flags = {'JP':'ğŸ‡¯ğŸ‡µ','US':'ğŸ‡ºğŸ‡¸','GB':'ğŸ‡¬ğŸ‡§','CA':'ğŸ‡¨ğŸ‡¦','AU':'ğŸ‡¦ğŸ‡º','DE':'ğŸ‡©ğŸ‡ª','FR':'ğŸ‡«ğŸ‡·','NL':'ğŸ‡³ğŸ‡±','SG':'ğŸ‡¸ğŸ‡¬','HK':'ğŸ‡­ğŸ‡°','KR':'ğŸ‡°ğŸ‡·','CN':'ğŸ‡¨ğŸ‡³','IN':'ğŸ‡®ğŸ‡³','BR':'ğŸ‡§ğŸ‡·','IT':'ğŸ‡®ğŸ‡¹','ES':'ğŸ‡ªğŸ‡¸','SE':'ğŸ‡¸ğŸ‡ª','CH':'ğŸ‡¨ğŸ‡­','NO':'ğŸ‡³ğŸ‡´','FI':'ğŸ‡«ğŸ‡®'};
                return flags[code] || 'ğŸŒ';
            }

            function getTimeAgo(timestamp) {
                const now = new Date();
                const past = new Date(timestamp);
                const diffMs = now - past;
                const diffMins = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMins / 60);
                const diffDays = Math.floor(diffHours / 24);
                if (diffMins < 1) return 'æ•°ç§’å‰';
                if (diffMins < 60) return `${diffMins}åˆ†å‰`;
                if (diffHours < 24) return `${diffHours}æ™‚é–“å‰`;
                if (diffDays < 7) return `${diffDays}æ—¥å‰`;
                return past.toLocaleDateString('ja-JP');
            }

            document.getElementById('startButton').addEventListener('click', async function() {
                if (currentConnectionData) localStorage.setItem('vpn_last_connection', JSON.stringify(currentConnectionData));
                this.disabled = true;
                document.getElementById('statusIndicator').classList.add('checking');
                document.getElementById('statusText').textContent = 'è¨ºæ–­ä¸­...';
                document.getElementById('statusDescription').textContent = 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™';
                document.getElementById('progressSection').style.display = 'block';
                document.getElementById('resultsSection').style.display = 'none';
                try {
                    await checkDNSLeak();
                    await checkWebRTCLeak();
                    await checkIPv6Leak();
                    displayResults();
                } catch (error) {
                    console.error('è¨ºæ–­ã‚¨ãƒ©ãƒ¼:', error);
                } finally {
                    this.disabled = false;
                }
            });

            async function checkDNSLeak() {
                const item = document.getElementById('progressDNS');
                item.classList.add('checking');
                try {
                    const ip1Response = await fetch('https://api.ipify.org?format=json');
                    const ip1Data = await ip1Response.json();
                    const ip2Response = await fetch('https://api.my-ip.io/ip.json');
                    const ip2Data = await ip2Response.json();
                    const ip1 = ip1Data.ip;
                    const ip2 = ip2Data.ip;
                    if (ip1 === ip2) {
                        diagnosisResults.dns = {status:'safe',ip:ip1,message:'DNSæ¼ã‚Œã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸï¼ˆè¤‡æ•°ã‚µãƒ¼ãƒãƒ¼ã§ç¢ºèªæ¸ˆã¿ï¼‰'};
                        item.classList.remove('checking');
                        item.classList.add('success');
                        item.querySelector('.progress-status').innerHTML = 'âœ…';
                    } else {
                        diagnosisResults.dns = {status:'warning',ip:ip1,message:'DNSæ¼ã‚Œã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼ˆIPä¸ä¸€è‡´ï¼‰'};
                        item.classList.remove('checking');
                        item.classList.add('warning');
                        item.querySelector('.progress-status').innerHTML = 'âš ï¸';
                    }
                } catch (error) {
                    diagnosisResults.dns = {status:'safe',message:'DNSæ¼ã‚Œãƒã‚§ãƒƒã‚¯ã‚’å®Œäº†'};
                    item.classList.remove('checking');
                    item.classList.add('success');
                    item.querySelector('.progress-status').innerHTML = 'âœ…';
                }
                await sleep(500);
            }

            async function checkWebRTCLeak() {
                const item = document.getElementById('progressWebRTC');
                item.classList.add('checking');
                return new Promise((resolve) => {
                    const ips = [];
                    let completed = false;
                    const pc = new RTCPeerConnection({iceServers:[{urls:'stun:stun.l.google.com:19302'}]});
                    const timeout = setTimeout(() => { if (!completed) { completed = true; finishCheck(); } }, 5000);
                    pc.createDataChannel('');
                    pc.createOffer().then(offer => pc.setLocalDescription(offer)).catch(() => { if (!completed) { completed = true; clearTimeout(timeout); finishCheck(); } });
                    pc.onicecandidate = (ice) => {
                        if (!ice || !ice.candidate || !ice.candidate.candidate) {
                            if (!completed) { completed = true; clearTimeout(timeout); setTimeout(() => finishCheck(), 500); }
                            return;
                        }
                        const candidateStr = ice.candidate.candidate;
                        const ipMatch = /([0-9]{1,3}\.){3}[0-9]{1,3}|[a-f0-9:]+/g.exec(candidateStr);
                        if (ipMatch && !ips.includes(ipMatch[0])) {
                            const ip = ipMatch[0];
                            const isPrivate = /^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])\.|192\.168\.)/.test(ip) || ip.startsWith('fe80:') || ip.startsWith('fc00:');
                            if (isPrivate) ips.push(ip);
                        }
                    };
                    function finishCheck() {
                        try { pc.close(); } catch (e) {}
                        if (ips.length === 0) {
                            diagnosisResults.webrtc = {status:'safe',message:'WebRTCãƒªãƒ¼ã‚¯ã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ',ips:[]};
                            item.classList.remove('checking');
                            item.classList.add('success');
                            item.querySelector('.progress-status').innerHTML = 'âœ…';
                        } else {
                            diagnosisResults.webrtc = {status:'warning',message:`ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸï¼ˆ${ips.length}ä»¶ï¼‰`,ips:ips};
                            item.classList.remove('checking');
                            item.classList.add('warning');
                            item.querySelector('.progress-status').innerHTML = 'âš ï¸';
                        }
                        resolve();
                    }
                });
            }

            async function checkIPv6Leak() {
                const item = document.getElementById('progressIPv6');
                item.classList.add('checking');
                try {
                    const response = await fetch('https://api64.ipify.org?format=json');
                    const data = await response.json();
                    const isIPv6 = data.ip.includes(':');
                    if (isIPv6) {
                        diagnosisResults.ipv6 = {status:'warning',ip:data.ip,message:'IPv6ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ'};
                        item.classList.remove('checking');
                        item.classList.add('warning');
                        item.querySelector('.progress-status').innerHTML = 'âš ï¸';
                    } else {
                        diagnosisResults.ipv6 = {status:'safe',message:'IPv6æ¼ã‚Œã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ'};
                        item.classList.remove('checking');
                        item.classList.add('success');
                        item.querySelector('.progress-status').innerHTML = 'âœ…';
                    }
                } catch (error) {
                    diagnosisResults.ipv6 = {status:'safe',message:'IPv6ã¯ç„¡åŠ¹ã§ã™'};
                    item.classList.remove('checking');
                    item.classList.add('success');
                    item.querySelector('.progress-status').innerHTML = 'âœ…';
                }
                await sleep(500);
            }

            function displayResults() {
                let score = 100;
                if (diagnosisResults.dns.status === 'warning') score -= 50;
                if (diagnosisResults.webrtc.status === 'warning') score -= 30;
                if (diagnosisResults.ipv6.status === 'warning') score -= 20;
                const statusClass = score >= 90 ? 'safe' : score >= 70 ? 'warning' : 'danger';
                document.getElementById('statusIndicator').className = 'status-indicator ' + statusClass;
                document.getElementById('statusIndicator').innerHTML = score >= 90 ? 'ğŸ”' : score >= 70 ? 'ğŸ”’' : 'ğŸ”“';
                document.getElementById('statusText').textContent = score >= 90 ? 'å®‰å…¨ã§ã™' : score >= 70 ? 'æ³¨æ„ãŒå¿…è¦' : 'å±é™ºã§ã™';
                document.getElementById('statusDescription').textContent = score >= 90 ? 'VPNæ¥ç¶šã¯é©åˆ‡ã«ä¿è­·ã•ã‚Œã¦ã„ã¾ã™' : score >= 70 ? 'ä¸€éƒ¨ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ' : 'é‡å¤§ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ';
                document.getElementById('scoreValue').textContent = score;
                document.getElementById('scoreLabel').textContent = '/ 100ç‚¹';
                const resultsHTML = `${generateResultCard('DNSæ¼ã‚Œãƒã‚§ãƒƒã‚¯',diagnosisResults.dns,'ğŸŒ')}${generateResultCard('WebRTCãƒªãƒ¼ã‚¯ãƒã‚§ãƒƒã‚¯',diagnosisResults.webrtc,'ğŸ“¡')}${generateResultCard('IPv6æ¼ã‚Œãƒã‚§ãƒƒã‚¯',diagnosisResults.ipv6,'ğŸŒ')}`;
                document.getElementById('resultCards').innerHTML = resultsHTML;
                document.getElementById('resultsSection').style.display = 'block';
            }

            function generateResultCard(title, result, icon) {
                const statusClass = result.status;
                const badgeClass = result.status === 'safe' ? 'badge-safe' : 'badge-warning';
                const badgeText = result.status === 'safe' ? 'å®‰å…¨' : 'æ³¨æ„';
                let detailsHTML = `<p>${result.message}</p>`;
                if (result.ip) detailsHTML += `<div class="result-data">IPã‚¢ãƒ‰ãƒ¬ã‚¹: ${result.ip}</div>`;
                if (result.ips && result.ips.length > 0) detailsHTML += `<div class="result-data">æ¤œå‡ºã•ã‚ŒãŸIP: ${result.ips.join(', ')}</div>`;
                return `<div class="result-card ${statusClass}"><div class="result-header"><div class="result-title"><span class="result-icon">${icon}</span><span>${title}</span></div><div class="result-badge ${badgeClass}">${badgeText}</div></div><div class="result-details">${detailsHTML}</div></div>`;
            }

            document.getElementById('shareButton').addEventListener('click', function() {
                document.getElementById('shareModal').classList.add('active');
            });

            document.getElementById('shareClose').addEventListener('click', function() {
                document.getElementById('shareModal').classList.remove('active');
            });

            document.getElementById('shareModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });

            document.getElementById('shareTwitter').addEventListener('click', function(e) {
                e.preventDefault();
                const score = parseInt(document.getElementById('scoreValue').textContent);
                const icons = {
                    perfect: '\uD83D\uDD10',
                    good: '\uD83D\uDD12',
                    bad: '\uD83D\uDD13'
                };
                const icon = score >= 90 ? icons.perfect : score >= 70 ? icons.good : icons.bad;
                const statusText = score >= 90 ? 'å®Œç’§ï¼' : score >= 70 ? 'ã¾ã‚ã¾ã‚' : 'è¦æ”¹å–„';
                const text = icon + ' VPNã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨ºæ–­çµæœ: ' + score + 'ç‚¹ï¼ˆ' + statusText + 'ï¼‰\n\nDNSæ¼ã‚Œãƒ»WebRTCãƒªãƒ¼ã‚¯ãƒ»IPv6æ¼ã‚Œã‚’ç„¡æ–™ã§ãƒã‚§ãƒƒã‚¯ï¼\n\n#VPN #ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨ºæ–­ #ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ #DNSæ¼ã‚Œ #WebRTC';
                const url = window.location.href;
                const twitterUrl = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(text) + '&url=' + encodeURIComponent(url);
                window.open(twitterUrl, '_blank', 'width=550,height=420');
                document.getElementById('shareModal').classList.remove('active');
            });

            document.getElementById('shareLine').addEventListener('click', function(e) {
                e.preventDefault();
                const score = parseInt(document.getElementById('scoreValue').textContent);
                const icons = {
                    perfect: '\uD83D\uDD10',
                    good: '\uD83D\uDD12',
                    bad: '\uD83D\uDD13'
                };
                const icon = score >= 90 ? icons.perfect : score >= 70 ? icons.good : icons.bad;
                const statusText = score >= 90 ? 'å®Œç’§ï¼' : score >= 70 ? 'ã¾ã‚ã¾ã‚' : 'è¦æ”¹å–„';
                const text = icon + ' VPNã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨ºæ–­çµæœ: ' + score + 'ç‚¹ï¼ˆ' + statusText + 'ï¼‰\n\nDNSæ¼ã‚Œãƒ»WebRTCãƒªãƒ¼ã‚¯ãƒ»IPv6æ¼ã‚Œã‚’ç„¡æ–™ã§ãƒã‚§ãƒƒã‚¯ï¼\n\n' + window.location.href + '\n\n#VPN #ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ #ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼';
                const lineUrl = 'https://line.me/R/msg/text/?' + encodeURIComponent(text);
                window.open(lineUrl, '_blank');
                document.getElementById('shareModal').classList.remove('active');
            });

            document.getElementById('shareFacebook').addEventListener('click', function(e) {
                e.preventDefault();
                const url = window.location.href;
                const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
                window.open(facebookUrl, '_blank', 'width=550,height=420');
                document.getElementById('shareModal').classList.remove('active');
            });

            document.getElementById('shareCopy').addEventListener('click', function() {
                const score = parseInt(document.getElementById('scoreValue').textContent);
                const icons = {
                    perfect: '\uD83D\uDD10',
                    good: '\uD83D\uDD12',
                    bad: '\uD83D\uDD13'
                };
                const icon = score >= 90 ? icons.perfect : score >= 70 ? icons.good : icons.bad;
                const statusText = score >= 90 ? 'å®Œç’§ï¼' : score >= 70 ? 'ã¾ã‚ã¾ã‚' : 'è¦æ”¹å–„';
                const text = icon + ' VPNã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨ºæ–­çµæœ: ' + score + 'ç‚¹ï¼ˆ' + statusText + 'ï¼‰\n\nDNSæ¼ã‚Œãƒ»WebRTCãƒªãƒ¼ã‚¯ãƒ»IPv6æ¼ã‚Œã‚’ç„¡æ–™ã§ãƒã‚§ãƒƒã‚¯ï¼\n' + window.location.href + '\n\n#VPN #ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ #ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼';
                
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text).then(function() {
                        showCopyNotification();
                    }).catch(function() {
                        fallbackCopy(text);
                    });
                } else {
                    fallbackCopy(text);
                }
                
                document.getElementById('shareModal').classList.remove('active');
            });

            function fallbackCopy(text) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                    showCopyNotification();
                } catch (err) {
                    alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
                document.body.removeChild(textarea);
            }

            function showCopyNotification() {
                const notification = document.getElementById('copyNotification');
                notification.classList.add('show');
                setTimeout(function() {
                    notification.classList.remove('show');
                }, 3000);
            }

            document.getElementById('restartButton').addEventListener('click', function() {
                location.reload();
            });

            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            loadConnectionInfo();
        })();
    </script>
</body>
</html>
